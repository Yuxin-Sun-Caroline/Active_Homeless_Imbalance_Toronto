---
title: "Active Homeless Population: A Growing Imbalance in Proportions"
author:
  - Yuxin Sun
thanks: "A GitHub Repository containing all data, R code, and other files used in this investigation is located here: <https://github.com/Yuxin-Sun-Caroline/STA304-paper1>"
date: 09-22-2024
date-format: long
abstract: "In this report, the dataset on the actively homeless population was analyzed. The data shows that the non-refugee population is much larger than the refugee group, while single adults significantly outnumber those with families. In terms of gender distribution, males continue to dominate the overall population. Over time, from 2018 to 2024, there has been a marked increase in chronic homeless individuals, refugees, and single adults, indicating significant growth within these categories. These trends underscore the importance of tailored interventions to address the growing challenges faced by these groups. Future research should investigate the underlying causes of these increases and evaluate the impact of current policies aimed at supporting these vulnerable populations."
format: pdf
number-sections: true
# The toc parameter used to create a table of contents was obtained from
# Quarto documentation:
# https://quarto.org/docs/reference/formats/pdf.html
toc: true
bibliography: references.bib
---

```{r}
#| echo: false
#| warning: false
#### Preamble ####

# Purpose: Generates a paper titled "Active Homeless Population: A Growing Imbalance in Proportions" in PDF format when rendered.
# Author: Yuxin Sun
# Date: September 22, 2024
# Contact: yuxin.sun@mail.utoronto.ca
# Pre-requisites: none".
```

```{r}
#| echo: false
#| warning: false
#### Loading Packages ####

# install.packages("tidyverse")
# install.packages("here")
library(tidyverse)
library(here)
```

# Introduction {#sec-introduction}
Homelessness is a complex and growing issue in urban centers, with cities like Toronto witnessing significant shifts in the homeless population over the years. As economic challenges, global crises, and local policies evolve, it is crucial to analyze these changes to develop effective interventions. This report focuses on data from Toronto's shelter system to examine the composition and trends of the actively homeless population from 2018 to 2024, using insights from the City of Toronto's Open Data Portal.

Despite extensive research on homelessness, gaps remain in understanding the demographic shifts within this vulnerable group, particularly among chronic homeless individuals, single adults, and refugees. This study aims to address these gaps by analyzing the trends in these populations over time and exploring the implications for future policy development.

Our analysis reveals that single adults and non-refugees consistently make up the majority of the homeless population, with a notable increase in chronic homelessness beginning in 2022. This growth correlates with the economic and social impacts of the COVID-19 pandemic, further straining resources. Males dominate the gender distribution, with the proportion of transgender or non-binary individuals remaining small. These findings highlight an urgent need for targeted interventions, particularly for chronic homeless single adults and refugees.

Understanding these trends is critical for formulating policies that address the unique challenges faced by these groups. Future research should explore the root causes driving these shifts and evaluate the effectiveness of current support systems.

The structure of this report is as follows: Section 1 provides an overview of the dataset and methodology. Section 2 presents key findings from the analysis, while Section 3 discusses the implications of these results. Section 4 concludes with recommendations for policy and future research directions.

# Data {#sec-data}

## Overview {#sec-data-overview}
The dataset used in this analysis is part of the "Toronto Shelter System Flow Data," which is regularly updated and published by the City of Toronto (City of Toronto 2024). This dataset provides comprehensive details on the shelter system's capacity, usage, and flow of individuals across different shelters in the city. It is part of Toronto's open data initiative and can be freely accessed and utilized as long as proper attribution is provided according to the Open Government License – Toronto (City of Toronto, n.d.).

The dataset captures various variables, including the number of actively homeless individuals, categorized by demographic groups such as gender, age, and refugee status. Key variables analyzed in this report include “Shelter Capacity” and “Occupancy Rate,” which track the shelter system's capacity and how much of it is being used, respectively, as well as “Actively Homeless Population,” a variable reflecting the number of individuals experiencing homelessness. This data is crucial for understanding the demographic shifts in Toronto's homeless population and the system’s ability to accommodate these changes.

For this analysis, the R programming language (R Core Team 2022) was used along with packages such as *janitor* (Firke 2023) and *tidyverse* (Wickham et al. 2019) to clean and organize the data. The *opendatatoronto* package (Gelfand 2022) was utilized to download the raw data directly from Toronto’s Open Data Portal, followed by data cleaning and analysis using the *tidyverse* suite of packages. This process ensured the accuracy and reliability of the analysis, allowing for insights into the trends within Toronto’s shelter system over time.

## Results {#sec-data-results}

```{r}
#| echo: false
#| warning: false
#| message: false

#### Clean the Raw Dataset and Label for the graph ####

# Load necessary library
library(dplyr)

# Load the data
data <- read.csv("/Users/so_watermelon/Downloads/starter_folder-main-2/data/raw_data/raw_data.csv")

# Clean column names
clean_data <- data %>%
  rename(
    id = X_id,
    date = date.mmm.yy.,
    population_group = population_group,
    returned_from_housing = returned_from_housing,
    returned_to_shelter = returned_to_shelter,
    newly_identified = newly_identified,
    moved_to_housing = moved_to_housing,
    became_inactive = became_inactive,
    actively_homeless = actively_homeless,
    age_under_16 = ageunder16,
    age_16_24 = age16.24,
    age_25_34 = age25.34,
    age_35_44 = age35.44,
    age_45_54 = age45.54,
    age_55_64 = age55.64,
    age_65_over = age65over,
    gender_male = gender_male,
    gender_female = gender_female,
    gender_transgender_non_binary_or_two_spirit = gender_transgender.non.binary_or_two_spirit,
    population_group_percentage = population_group_percentage
  )

# Convert percentage column to numeric by removing the percentage sign
clean_data <- clean_data %>%
  mutate(population_group_percentage = as.numeric(gsub("%", "", population_group_percentage)))

# Display the cleaned data
#head(clean_data)

```

After loading the dataset using the R programming language [@citeR] and the `here` package [@citehere], the `tidyverse` [@citetidyverse] package was used to generate graphs. In doing so, R code was adapted from @tellingstorieswithdata.

\newpage


```{r}
#| echo: false
#| warning: false
#| label: fig-bar-chart-of-distribution
#| fig-cap: "Actively Homeless Population By Group from 2018 to 2024 in Toronto"

#### First Graph ####

# Install and load necessary libraries if not already installed
if (!require(ggplot2)) install.packages("ggplot2", dependencies=TRUE)
if (!require(RColorBrewer)) install.packages("RColorBrewer", dependencies=TRUE)
library(ggplot2)
library(RColorBrewer)

# Define a custom rainbow-like Morandi-inspired color palette with a better balance
morandi_rainbow_palette_balanced <- c("#D4A8C0", "#A8D4E0", "#C0A8D4", "#D4A8A8", 
                                      "#F4B183", "#E0A8D4", "#A8C0D4", "#D4E0A8")

# Bar plot of actively homeless population by population group with the updated balanced Morandi rainbow colors
ggplot(clean_data, aes(x = population_group, y = actively_homeless, fill = population_group)) +
  geom_bar(stat = "identity", alpha = 0.9) +  # Bar plot without black borders
  scale_fill_manual(values = morandi_rainbow_palette_balanced) +         # Apply the updated rainbow-like palette
  labs(title = "Actively Homeless Population by Group",
       x = "Population Group",
       y = "Actively Homeless Population",
       fill = "Population Group") +
  theme_minimal(base_size = 15) +                                         # Minimal theme for a clean look
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold", size = 18),     # Center the title and make it bold
    axis.text.x = element_text(angle = 45, hjust = 1),                    # Rotate x-axis labels for readability
    legend.position = "none",                                             # Remove the legend for simplicity
    panel.grid.major = element_line(color = "#E5E5E5")                    # Soft gridlines for a subtle look
  )


```

@fig-bar-chart-of-distribution clearly illustrates the comparison and differences in the number of individuals identified as "actively homeless" across different groups in Toronto shelter data base. The "all population" category, representing the majority without specific demographic breakdown, shows a strikingly high number of homeless individuals. When comparing families with single adults, it is evident that single adults significantly outnumber families. Similarly, when comparing refugees with non-refugees, non-refugees far exceed the number of refugees.



\newpage


```{r}
#| echo: false
#| warning: false
#| label: fig-gender-comparison
#| fig-cap: "Porportion of different genders in Actively Homeless Population"

#### Second Graph ####

# Install and load necessary libraries if not already installed
if (!require(ggplot2)) install.packages("ggplot2", dependencies=TRUE)
if (!require(dplyr)) install.packages("dplyr", dependencies=TRUE)
if (!require(scales)) install.packages("scales", dependencies=TRUE)  # For percentage labels
library(ggplot2)
library(dplyr)
library(scales)

# Define colors for gender
gender_colors <- c("male" = "#A0E7E5",       
                   "female" = "#D4A5A5",     
                   "transgender" = "#9E9E9E") 

# Summarize the total counts by gender
gender_data <- clean_data %>%
  summarise(
    male = sum(gender_male, na.rm = TRUE),
    female = sum(gender_female, na.rm = TRUE),
    transgender = sum(gender_transgender_non_binary_or_two_spirit, na.rm = TRUE)
  ) %>%
  pivot_longer(cols = everything(), names_to = "gender", values_to = "count")

# Add percentage labels
gender_data <- gender_data %>%
  mutate(percentage = count / sum(count) * 100,
         label = paste0(gender, " (", round(percentage, 1), "%)"))

# Create the pie chart
ggplot(gender_data, aes(x = "", y = count, fill = gender)) +
  geom_bar(stat = "identity", width = 1, color = "white") +  # Create the bar for pie chart
  coord_polar(theta = "y") +  # Convert bar chart to pie chart
  scale_fill_manual(values = gender_colors, 
                    labels = c("Male", "Female", "Transgender/Non-binary")) +  # Apply custom colors
  geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white", size = 5) +  # Add percentage labels
  labs(title = "Gender Distribution in Population") +
  theme_void() +  # Remove axes and grid for clean pie chart
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold", size = 18),  # Center and bold the title
    legend.title = element_blank(),                                    # Remove legend title
    legend.position = "right"                                          # Position the legend on the right
  )



```

@fig-gender-comparison shows that the vast majority of actively homeless in Toronto were males (approximately 61.6\%). Females on the other hand, shows a lot less percentage by (37\%), which makes approcimately nearly a half less than the males. For Transgender or non-binary group, they played only (1.4\%) in this distribution. However, such a low proportion could also be due to the fact that transgender individuals may not openly disclose their gender.

\newpage

```{r}
#| echo: false
#| warning: false
#| label: fig-line-graph-by-time
#| fig-cap: "Active Homeless Population Change From 2018 to 2024"
#### Third Graph ####


# Load necessary libraries
library(ggplot2)
library(dplyr)

# Assuming the cleaned dataset is already loaded into a data frame called 'clean_data'

# Convert the 'date' column to a date format for plotting
clean_data <- clean_data %>%
  mutate(date = as.Date(paste("01", date, sep = "-"), format = "%d-%b-%y"))

# Create a line plot of active homeless population over time
ggplot(clean_data, aes(x = date, y = actively_homeless, group = population_group, color = population_group)) +
  geom_line(size = 1) +
  labs(title = "Active Homeless Population Over Time",
       x = "Date",
       y = "Number of Actively Homeless",
       color = "Population Group") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

@fig-line-graph-by-time illustrates the growth history and trends of different categories within the actively homeless population from 2018 to 2024. Notably, starting from 2022, there has been a significant increase in chronic, refugee, and single adult populations, in addition to the overall "all population" category. The year 2022, marked by the initial economic impacts of the COVID-19 pandemic and emerging global geopolitical challenges, highlights the severe toll these shifts have taken on vulnerable groups, including single adults and refugees. The rise in the chronic homeless population further indicates that the long-term effects of these challenges will prolong the difficulty and pressure on efforts to restore safety and stability in communities.


```{r}


# Discussion {#sec-discussion}

In @fig-bar-chart-of-distribution, the comparison between different groups within Toronto’s shelter system clearly highlights significant disparities in the actively homeless population. The all population category, representing the majority, shows a strikingly large number of homeless individuals without demographic breakdowns. When focusing on specific groups, single adults significantly outnumber families, and non-refugees far exceed refugees. These findings align with the broader trends observed in @fig-line-graph-by-time, which shows a marked increase in chronic, refugee, and single adult homeless populations beginning in 2022, likely driven by the economic and social effects of the COVID-19 pandemic. This sharp rise in homelessness within these vulnerable groups underscores the ongoing and prolonged impacts of these global crises, making it more difficult to restore community stability.

Gender distribution data from @fig-gender-comparison further reveals that males constitute the vast majority of Toronto’s homeless population at 61.6%, with females making up 37%. The proportion of transgender or non-binary individuals is notably low at just 1.4%, though this could be partly due to underreporting, as some individuals may not feel comfortable disclosing their gender identity. These combined findings emphasize the urgent need for targeted policies that address the distinct needs of these subgroups, especially given the increasing challenges observed in recent years.

Although extensive data on Toronto’s shelter system flow from 2018 to 2024 was analyzed, several limitations exist. For example, the dataset primarily focuses on individuals utilizing shelters, which may not account for those experiencing homelessness who are not engaged with the formal shelter system, leading to a potential underestimation of the total homeless population. Additionally, demographic categories such as gender and refugee status rely on self-reported data, which may result in underreporting, especially for transgender or non-binary individuals who might not feel comfortable disclosing their identity. 

Future research should explore the broader homeless population, including those not utilizing shelters, to gain a more comprehensive understanding of homelessness in Toronto. It would also be beneficial to investigate the long-term effects of economic and geopolitical factors, such as the COVID-19 pandemic, on the chronic homeless population. Expanding this analysis to examine housing stability, health outcomes, and service utilization in other major cities across Canada could provide deeper insights into this ongoing crisis and inform more effective interventions. 


\newpage

\appendix

# Appendix {#sec-appendix}

## Dataset and Graph Sketches {#sec-appendix-sketches}

Sketches depicting both the desired dataset and the graphs generated in this analysis are available in the GitHub Repository.

## Data Cleaning {#sec-appendix-cleaning}

The data cleaning process involved filtering out some of the columns from the raw dataset and renaming some of the data entries for clarity and simplicity.

## Attribution Statement {#sec-appendix-attribution}

"Contains information licensed under the Open Government Licence – Toronto" [@tphlicense].

\newpage

# References {#sec-references}